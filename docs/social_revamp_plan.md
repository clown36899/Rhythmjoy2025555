# [기획서] 소셜라우트 개편 및 집단 중심 일정 시스템 구축 (V5)

본 문서는 소셜라우트를 기존의 단순 나열 방식에서 벗어나 **'집단(Group)'** 중심의 독립적인 일정 관리 플랫폼으로 완전히 새로 구축하기 위한 작업 명세서입니다. 각 단계별로 사용자 테스트 및 승인 과정을 거쳐 신중하게 진행합니다.

---

## 1. 프로젝트 목표 (Core Objectives)
- **집단화(Grouping)**: 동호회, 바, 기타 단체별 독립적 공간 제공
- **수집 및 개인화**: 사용자가 집단을 즐겨찾기하여 팔로우하고 일정을 모아볼 수 있는 기능 제공
- **정밀한 일정 관리**: 집단별 전용 캘린더를 통한 체계적인 스케줄링
- **신규 구축**: 기존 레거시 데이터와 분리된 완전히 새로운 아키텍처 적용

---

## 2. 주요 기능 및 UI 요건

### 2.1. 소셜라우트 메인 레이아웃 (3단 구성)
- **[1단] 오늘의 일정 (Today's Social)**: 당일 진행되는 단체 일정 노출 및 상세 모달 연동
- **[2단] 금주의 일정 (Weekly View)**: 이번 주(일~토) 전체 소셜 일정을 요일별로 브라우징
- **[3단] 집단 리스트 (Group Directory)**: 가로 500px 카드 리스트 및 실시간 즐겨찾기 기능

### 2.2. 상세 모달 및 공유 기능 (전방위 적용)
- **공유 버튼 적용 분야**: 일정 상세 모달, 집단 상세/캘린더 모달
- **공유 방식**: 기존 이벤트 시스템과 동일한 딥링크(URL 복사/SNS 공유) 로직 활용

### 2.3. 개발 원칙 (Technical Strategy - 시행착오 반영)
- **네트워크 최적화**: 목록 조회 시 대용량 필드 제외, 상세 조회 시 별도 Fetch
- **보안 최적화**: 비밀번호 관리 완전 제거, RLS(Auth) 기반의 강력한 권한 제어
- **상태 최적화**: 커스텀 훅을 통한 전역 즐겨찾기 상태 실시간 동기화
- **안정성 최적화**: 모든 쓰기 작업 시 `GlobalLoadingOverlay` 및 자동 재시도 적용
- **레이아웃 최적화**: 헤더(60-80px) 및 바텀 네비게이션(120px) 겹침 방지 여백 필수 확보

---

## 3. 진행 Task 및 단계별 테스트 항목

### Stage 1: DB 인프라 구축 (데이터 설계)
- [ ] `social_groups` 테이블 설계 및 생성
- [ ] `social_schedules` 테이블 설계 및 생성
- [ ] `social_group_favorites` 테이블 설계 및 생성
- [ ] RLS(권한 정책) 설정 (작성자/관리자 전용 수정 권한)
- **🔍 사용자 테스트 항목**:
    - 테이블 구조가 기획과 일치하는지 확인
    - 직접 SQL 에디터 등에서 샘플 데이터 입력 시 권한 오류 없는지 확인
- **⚠️ 이 단계가 완료되면 보고 후 유저 승인을 대기합니다.**

### Stage 2: 데이터 관리 및 이미지 시스템 (관리자 기능) ✅
- [x] 집단(Group) 등록 및 수정 모달 구현
- [x] 일정(Schedule) 등록 및 수정 모달 구현
- [x] **일정 복사 기능** 구현 (기존 일정 클릭 시 새 날짜로 데이터 복사)
- [x] **이미지 4단계 리사이즈** 유틸리티 연동 (WebP 변환 포함)
- **🔍 사용자 테스트 항목**:
    - 집단/일정 등록 시 이미지가 4개 버전으로 자동 리사이징 되는지 확인 (통과)
    - "일정 복사" 버튼 클릭 시 데이터가 새 등록 폼에 잘 채워지는지 확인 (통과)
    - 본인이 등록하지 않은 집단을 수정하려고 할 때 차단되는지 확인 (통과)
- **⚠️ 이 단계가 완료되면 보고 후 유저 승인을 대기합니다.**

### Stage 3: 소셜 메인 페이지 및 UI 구현 (사용자 기능)
- [ ] 3단 레이아웃(오늘/금주/리스트) 퍼블리싱 및 데이터 연동
- [ ] 집단 전용 **캘린더 모달** 개발 (기존 캘린더 UI 이식)
- [ ] 실시간 즐겨찾기(수집) 기능 및 커스텀 훅 연동
- [ ] 모든 상세 뷰에 **공유 버튼** 및 딥링크 연동
- [ ] **레이아웃 폴리싱**: 바텀 바 가림 방지 여백(padding-bottom: 120px) 및 헤더 여백 전수 점검
- **🔍 사용자 테스트 항목**:
    - '오늘의 일정'이 날짜에 맞게 정확히 필터링되는지 확인
    - 집단 리스트에서 별 아이콘 클릭 시 즉시 반영되는지 확인
    - 공유 버튼 클릭 시 생성되는 URL이 정상적으로 상세 페이지로 연결되는지 확인
- **⚠️ 이 단계가 완료되면 보고 후 유저 승인을 대기합니다.**

### Stage 4: 통합 연동 및 최종 최적화
- [ ] 메인 홈 화면 Billboard 하단 '오늘의 소셜' 섹션 동적 노출
- [ ] 전체 서비스 쿼리 성능 최적화 (Network Diet 적용 여부 점검)
- [ ] 모바일/웹 반응형 최종 폴리싱
- **🔍 사용자 테스트 항목**:
    - 메인 홈 화면에서 소셜 데이터가 실시간 연동되는지 확인
    - 모바일 환경에서 스크롤 및 모달 전환이 부드러운지 최종 점검
- **🏁 최종 완료 승인 후 프로젝트 마무리**

---
**최종 업데이트**: 2025-12-25
**작성자**: Antigravity AI
