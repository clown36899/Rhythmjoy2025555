<!doctype html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="google" content="notranslate" />
  <base href="/" />
  <link rel="icon" type="image/png" href="/icon-192.png" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover, shrink-to-fit=no" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <script>
    // [Critical] v48 Armor - Bootstrap Analytics
    (function () {
      window.__LOGS = [];
      window.__BOOT_LOG = function (m, d) {
        var entry = { t: new Date().toISOString(), m: m, d: d };
        window.__LOGS.push(entry);
        console.log('%c[Bootstrap] ' + m, 'background: #333; color: #ffeb3b; font-weight: bold;', d || '');
      };

      window.__BOOT_LOG('Stage 1: Head reached', {
        ua: navigator.userAgent,
        vendor: navigator.vendor,
        pwa: ('standalone' in navigator && navigator.standalone) || window.matchMedia('(display-mode: standalone)').matches
      });

      // ì—ëŸ¬ ìº¡ì²˜ (Capture Phase)
      window.addEventListener('error', function (e) {
        var src = e.target && (e.target.src || e.target.href);
        window.__BOOT_LOG('ğŸš¨ Error Captured', { msg: e.message, src: src, type: e.type });

        // ìì‚° ë¡œë“œ ì‹¤íŒ¨ ì‹œ ìƒˆë¡œê³ ì¹¨ (ë¬´í•œ ë£¨í”„ ë°©ì§€ ë¡œì§ í¬í•¨)
        if (src && (src.indexOf('chunk') > -1 || src.indexOf('assets') > -1)) {
          var reloadCount = parseInt(sessionStorage.getItem('boot_reload_count') || '0');
          if (reloadCount < 3) {
            window.__BOOT_LOG('âš ï¸ Asset failed to load. Reloading... (' + (reloadCount + 1) + '/3)');
            sessionStorage.setItem('boot_reload_count', (reloadCount + 1).toString());
            setTimeout(function () { window.location.reload(); }, 1500);
          } else {
            window.__BOOT_LOG('âŒ Max reload reached. Stopping loop.');
          }
        }
      }, true);

      // ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ë©´ ì¹´ìš´íŠ¸ ì´ˆê¸°í™” (ì§€ì—° ì‹¤í–‰)
      window.addEventListener('load', function () {
        setTimeout(function () { sessionStorage.removeItem('boot_reload_count'); }, 3000);
      });

      // í…Œë§ˆ ì´ˆê¸°í™”
      try {
        var theme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', theme);
      } catch (e) {
        document.documentElement.setAttribute('data-theme', 'dark'); // fallback for Private Mode
      }
    })();
  </script>

  <!-- PWA ì„¤ì • - ê¸°ë³¸ manifest ì •ì  ë°°ì¹˜ (PWA ê°ì§€ ì•ˆì •ì„±) -->
  <link rel="manifest" id="manifest-placeholder" href="/manifest.json" />
  <meta name="theme-color" content="#000000" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="ë¹Œë³´ë“œ" />
  <!-- Dynamic theme-color handled by script above -->
  <!-- Open Graph / Facebook -->
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://swingenjoy.com/" />
  <meta property="og:title" content="ëŒ„ìŠ¤ë¹Œë³´ë“œ - ìŠ¤ìœ™ ëŒ„ìŠ¤ ì´ë²¤íŠ¸ ê³µìœ  í”Œë«í¼" />
  <meta property="og:description" content="ì „êµ­ì˜ ë‹¤ì±„ë¡œìš´ ìŠ¤ìœ™ ëŒ„ìŠ¤ ì†Œì…œ, ê°•ìŠµ, íŒŒí‹° ì •ë³´ë¥¼ í•œëˆˆì— í™•ì¸í•˜ê³  ê³µìœ í•˜ì„¸ìš”." />
  <meta property="og:image" content="https://swingenjoy.com/kakao-share-card.png" />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://swingenjoy.com/" />
  <meta property="twitter:title" content="ëŒ„ìŠ¤ë¹Œë³´ë“œ - ìŠ¤ìœ™ ëŒ„ìŠ¤ ì´ë²¤íŠ¸ ê³µìœ  í”Œë«í¼" />
  <meta property="twitter:description" content="ì „êµ­ì˜ ë‹¤ì±„ë¡œìš´ ìŠ¤ìœ™ ëŒ„ìŠ¤ ì†Œì…œ, ê°•ìŠµ, íŒŒí‹° ì •ë³´ë¥¼ í•œëˆˆì— í™•ì¸í•˜ê³  ê³µìœ í•˜ì„¸ìš”." />
  <meta property="twitter:image" content="https://swingenjoy.com/kakao-share-card.png" />

  <!-- ë¹Œë³´ë“œ ì „ìš© ë™ì  Manifest ì „í™˜ (ê²©ë¦¬ ì •ì±… ìœ ì§€) -->
  <script>
    (function () {
      const currentPath = window.location.pathname;
      const baseUrl = window.location.origin;

      // ë¹Œë³´ë“œ í˜ì´ì§€ì¼ ë•Œë§Œ ì •ì  manifestë¥¼ ë™ì  manifestë¡œ êµì²´
      if (currentPath.includes('/billboard/')) {
        const userId = currentPath.split('/billboard/')[1];
        if (userId) {
          const manifestUrl = window.location.hostname === 'localhost'
            ? 'http://localhost:3001/api/billboard-manifest?userId=' + userId
            : baseUrl + '/.netlify/functions/billboard-manifest?userId=' + userId;
          document.getElementById('manifest-placeholder').setAttribute('href', manifestUrl);
        }
      }
    })();

    // PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ ì¡°ê¸° ìº¡ì²˜
    window.deferredPrompt = null;
    window.addEventListener('beforeinstallprompt', (e) => {
      console.log('ğŸš€ [index.html] beforeinstallprompt captured early');
      e.preventDefault();
      window.deferredPrompt = e;
      // React ì»¨í…ìŠ¤íŠ¸ê°€ ë¡œë“œëœ í›„ì—ë„ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ ë°œì†¡
      window.dispatchEvent(new CustomEvent('pwaPromptReady', { detail: e }));
    });

    // ìœ íŠœë¸Œ iframe ì½˜ì†” ì—ëŸ¬ í•„í„°ë§ (ê¸°ëŠ¥ì—ëŠ” ì˜í–¥ ì—†ìŒ)
    const originalError = console.error;
    console.error = function (...args) {
      const errorMsg = args[0]?.toString() || '';
      // YouTube ë‚´ë¶€ ì˜¤ë¥˜ ë¬´ì‹œ
      if (errorMsg.includes('Unknown yt page')) {
        return;
      }
      // postMessage cross-origin ì˜¤ë¥˜ ë¬´ì‹œ (YouTube iframe ë‚´ë¶€ í†µì‹ )
      if (errorMsg.includes('postMessage') || errorMsg.includes('DOMWindow')) {
        return;
      }
      originalError.apply(console, args);
    };
  </script>

  <title>ëŒ„ìŠ¤ë¹Œë³´ë“œ</title>
  <meta name="description"
    content="Find concerts, workshops, conferences and more happening near you. Create and discover amazing events with ê´‘ê³ íŒ.">

  <!-- DNS Prefetch for external domains -->
  <link rel="dns-prefetch" href="https://mkoryudscamnopvxdelk.supabase.co">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <!-- Preconnect for critical resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Font optimization with preload -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" as="style"
    onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap">
  </noscript>

  <!-- Icon fonts with async loading -->
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  </noscript>

  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.5.0/remixicon.min.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.5.0/remixicon.min.css">
  </noscript>

  <!-- Pretendard Web Font -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />

  <!-- Kakao Map SDK - í•­ìƒ ë¡œë“œ -->
  <script type="text/javascript"
    src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=4f36c4e35ab80c9bff7850e63341daa6&libraries=clusterer&autoload=false"></script>
  <!-- Kakao JS SDK for Sharing -->
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js"></script>

  <style>
    /* Essential Styles for initial load */
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* Google Translate styles - Theme aware */
    .goog-te-gadget-simple {
      background-color: transparent !important;
      border: none !important;
      padding: 4px 8px !important;
      color: var(--text-primary) !important;
    }

    .goog-te-gadget-icon {
      display: none !important;
    }

    #goog-gt-tt,
    .goog-te-banner-frame,
    .goog-te-balloon-frame {
      display: none !important;
    }

    body {
      top: 0 !important;
    }

    body.translated-ltr,
    body.translated-rtl {
      top: 0 !important;
    }

    .skiptranslate iframe,
    iframe.VIpgJd-ZVi9od-ORHb-OEVmcd,
    iframe.skiptranslate {
      display: none !important;
      visibility: hidden !important;
    }

    body>.skiptranslate {
      display: none !important;
    }

    /* Fix backdrop-filter compatibility */
    [data-theme="light"] .global-header {
      background-color: var(--header-bg-color);
    }

  </style>
</head>

<body style="margin: 0; padding: 0;">
  <div id="google_translate_element" style="display: none;"></div>

  <div id="root"></div>
  <script>window.__BOOT_LOG && window.__BOOT_LOG('Stage 2: Reached #root, loading main bundle');</script>
  <script type="module" src="/src/main.tsx"></script>
  <script>
    window.__BOOT_LOG && window.__BOOT_LOG('Stage 3: Main bundle tag parsed');
    document.addEventListener('DOMContentLoaded', function () {
      window.__BOOT_LOG && window.__BOOT_LOG('Stage 4: DOMContentLoaded event');
    });
    window.addEventListener('load', function () {
      window.__BOOT_LOG && window.__BOOT_LOG('Stage 5: Window Load event');
    });
  </script>

  <!-- Google Translate Script -->
  <script type="text/javascript">
    /**
     * [Isolation Policy] Billboard Kiosk Mode
     * ë¹Œë³´ë“œëŠ” ë…ë¦½ì ì¸ í‚¤ì˜¤ìŠ¤í¬ ëª¨ë“œë¡œ ìš´ì˜ë˜ë¯€ë¡œ ìƒí˜¸ì‘ìš© UI(ë²ˆì—­ ë“±)ë¥¼ ë°°ì œí•œë‹¤.
     */
    function googleTranslateElementInit() {
      // ë¹Œë³´ë“œ í˜ì´ì§€ì—ì„œëŠ” êµ¬ê¸€ ë²ˆì—­ ì´ˆê¸°í™” ì°¨ë‹¨
      if (window.location.pathname.includes('/billboard/')) return;

      new google.translate.TranslateElement(
        {
          pageLanguage: 'ko',
          includedLanguages: 'en',
          autoDisplay: false
          // layout ì œê±°: HORIZONTALì´ ê¸°ë³¸ê°’ì´ë©° .goog-te-combo ìš”ì†Œë¥¼ ìƒì„±í•¨
        },
        'google_translate_element'
      );
    }

    // ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜
    function changeLanguage(lang) {
      if (window.location.pathname.includes('/billboard/')) return;

      const select = document.querySelector('.goog-te-combo');

      if (select) {
        // í•œêµ­ì–´ ì„ íƒ ì‹œ ë²ˆì—­ ë„ê¸° (êµ¬ê¸€ ë²ˆì—­ X ë²„íŠ¼ê³¼ ë™ì¼í•œ ë°©ì‹)
        if (lang === 'ko') {
          // googtrans ì¿ í‚¤ ì‚­ì œ (ëª¨ë“  ê²½ë¡œì—ì„œ)
          document.cookie = 'googtrans=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain=' + window.location.hostname;
          document.cookie = 'googtrans=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;';
          // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ì›ë³¸ ì–¸ì–´ë¡œ ë³µì›
          window.location.reload();
        } else {
          select.value = lang;
          select.dispatchEvent(new Event('change'));

          // React ì»´í¬ë„ŒíŠ¸ì— ì–¸ì–´ ë³€ê²½ ì•Œë¦¼
          window.dispatchEvent(new CustomEvent('languageChanged', { detail: { lang } }));
        }
      } else {
        // Google Translateê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì¬ì‹œë„
        setTimeout(() => changeLanguage(lang), 500);
      }
    }

    // ë©”ë‰´ ì™¸ë¶€ í´ë¦­ ê°ì§€ ì œê±° (í† ê¸€ ë°©ì‹ìœ¼ë¡œ ë³€ê²½ë¨)

  </script>
  <script type="text/javascript"
    src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

  <!-- PWA Service Worker ë“±ë¡ + ë²„ì „ ì²´í¬ -->
  <script>
    /**
     * [Isolation Policy] Billboard Kiosk Mode
     * ë¹Œë³´ë“œëŠ” ë°ì´í„°/ë°°í¬ ì‹¤ì‹œê°„ ë™ê¸°í™”ë¥¼ ìœ„í•´ SW(ìºì‹œ)ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë…ë¦½ì ìœ¼ë¡œ ìš´ì˜ëœë‹¤.
     */
    if ('serviceWorker' in navigator) {
      // ìµœì´ˆ ì„¤ì¹˜(controller ì—†ìŒâ†’ìƒê¹€)ì™€ ì—…ë°ì´íŠ¸(controller êµì²´)ë¥¼ êµ¬ë¶„
      var _hadController = !!navigator.serviceWorker.controller;

      // SW êµì²´ ì™„ë£Œ ì‹œ ìë™ ë¦¬ë¡œë“œ (ìì‹ ì´ íŠ¸ë¦¬ê±°í–ˆë“ , ë‹¤ë¥¸ íƒ­ì´ íŠ¸ë¦¬ê±°í–ˆë“ )
      var _swRefreshing = false; // iOS ë¬´í•œ reload ë£¨í”„ ë°©ì§€ guard
      navigator.serviceWorker.addEventListener('controllerchange', function () {
        // ìµœì´ˆ ì„¤ì¹˜(controllerê°€ ì—†ë˜ ìƒíƒœâ†’ìƒê¹€)ì—ì„œëŠ” ë¦¬ë¡œë“œ ë¶ˆí•„ìš”
        if (!_hadController) { _hadController = true; return; }
        // ì´ë¯¸ reload ì¤‘ì´ë©´ ë¬´ì‹œ (iOSì—ì„œ controllerchangeê°€ reloadë¥¼ ì¬ìœ ë°œí•˜ëŠ” ë²„ê·¸ ë°©ì–´)
        if (_swRefreshing) return;
        _swRefreshing = true;
        // OAuth ì½œë°± ì¤‘(code= íŒŒë¼ë¯¸í„°)ì´ë©´ ì¸ì¦ ì½”ë“œ ë¬´íš¨í™” ë°©ì§€ë¥¼ ìœ„í•´ ë¦¬ë¡œë“œ ì•ˆ í•¨
        var params = new URLSearchParams(window.location.search);
        if (params.has('code') || params.has('error')) return;
        window.location.reload();
      });

      // ì—…ë°ì´íŠ¸ ëŒ€ê¸° í”Œë˜ê·¸: ì‚¬ìš© ì¤‘ì—ëŠ” ë¦¬ë¡œë“œí•˜ì§€ ì•Šê³ , ìì—°ìŠ¤ëŸ¬ìš´ ì „í™˜ ì‹œì ì— ì ìš©
      // window.__SW_UPDATE_PENDING = true â†’ React ë¼ìš°íŠ¸ ì „í™˜ ì‹œ ì²´í¬
      function autoApplyUpdate(reg) {
        if (window.location.pathname.includes('/billboard/')) return;
        if (!reg || !reg.waiting) return;
        window.__BOOT_LOG && window.__BOOT_LOG('Auto-applying SW update');
        var urlParams = new URLSearchParams(window.location.search);
        if (!urlParams.has('code') && !urlParams.has('error')) {
          try { sessionStorage.clear(); } catch (e) { }
        }
        reg.waiting.postMessage({ type: 'SKIP_WAITING' });
        // ì•ˆì „ì¥ì¹˜: 3ì´ˆ ë‚´ controllerchangeê°€ ë°œìƒí•˜ì§€ ì•Šìœ¼ë©´ ê°•ì œ ë¦¬ë¡œë“œ (auth ì½œë°± ì¤‘ì—” ìŠ¤í‚µ)
        setTimeout(function () {
          var p = new URLSearchParams(window.location.search);
          if (!p.has('code') && !p.has('error')) window.location.reload();
        }, 3000);
      }

      // ìƒˆ SWê°€ ëŒ€ê¸° ì¤‘ì„ì„ í‘œì‹œë§Œ í•˜ê³ , ë¦¬ë¡œë“œëŠ” ìì—°ìŠ¤ëŸ¬ìš´ ì‹œì ê¹Œì§€ ë¯¸ë£¸
      function markUpdatePending(reg) {
        if (window.location.pathname.includes('/billboard/')) return;
        if (!reg || !reg.waiting) return;
        window.__SW_UPDATE_PENDING = true;
        window.__SW_REG = reg;
        window.__BOOT_LOG && window.__BOOT_LOG('SW update pending (waiting for navigation)');
      }

      window.addEventListener('load', function () {
        // ë¹Œë³´ë“œ í˜ì´ì§€ì—ì„œëŠ” ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ë° ì—…ë°ì´íŠ¸ ì²´í¬ ì›ì²œ ì°¨ë‹¨
        if (window.location.pathname.includes('/billboard/')) {
          window.__BOOT_LOG && window.__BOOT_LOG('SW Registration Skipped (Billboard Kiosk Mode)');
          return;
        }

        var swUrl = '/service-worker.js?v=20260219_v50';
        navigator.serviceWorker.register(swUrl).then(function (reg) {
          window.__SW_REG = reg;
          window.__BOOT_LOG && window.__BOOT_LOG('SW Registered', { version: 'v50' });

          // 1) í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ë¯¸ ëŒ€ê¸° ì¤‘ì¸ SWê°€ ìˆì„ ë•Œ â†’ ì¦‰ì‹œ ì ìš© (ìƒˆë¡œê³ ì¹¨/PWAì‹¤í–‰ ë“± ìì—°ìŠ¤ëŸ¬ìš´ ì§„ì…ì )
          if (reg.waiting) {
            if (navigator.serviceWorker.controller) {
              autoApplyUpdate(reg);
            } else {
              // ìµœì´ˆ ì„¤ì¹˜: controller ì—†ìŒ â†’ skipWaitingìœ¼ë¡œ ì¦‰ì‹œ í™œì„±í™”
              reg.waiting.postMessage({ type: 'SKIP_WAITING' });
            }
            return;
          }

          // 2) ì‚¬ìš© ì¤‘ ìƒˆ SW ì„¤ì¹˜ ì™„ë£Œ(waiting) â†’ ì¦‰ì‹œ ë¦¬ë¡œë“œí•˜ì§€ ì•Šê³  ëŒ€ê¸°
          //    ë¼ìš°íŠ¸ ì „í™˜/í¬ì»¤ìŠ¤ ë³µê·€/ë‹¤ìŒ í˜ì´ì§€ ë¡œë“œ ì‹œ ì ìš©ë¨
          reg.addEventListener('updatefound', function () {
            var worker = reg.installing;
            if (!worker) return;
            worker.addEventListener('statechange', function () {
              if (worker.state === 'installed') {
                if (navigator.serviceWorker.controller) {
                  // ì‚¬ìš© ì¤‘ ì—…ë°ì´íŠ¸ ê°ì§€: ì¦‰ì‹œ ì ìš© (PWA ê»ë‹¤ ì¼œì§€ ì•Šì•„ë„ ë°˜ì˜)
                  autoApplyUpdate(reg);
                } else {
                  // ìµœì´ˆ ì„¤ì¹˜: ì¦‰ì‹œ í™œì„±í™”
                  reg.waiting && reg.waiting.postMessage({ type: 'SKIP_WAITING' });
                }
              }
            });
          });
        });

        // 3) PWA ì¬ì‹¤í–‰ / íƒ­ í¬ì»¤ìŠ¤ ë³µê·€ ì‹œ â†’ ìì—°ìŠ¤ëŸ¬ìš´ ì „í™˜ ì‹œì ì´ë¯€ë¡œ ì¦‰ì‹œ ì ìš©
        document.addEventListener('visibilitychange', function () {
          if (document.visibilityState === 'visible' && window.__SW_REG) {
            // ì´ë¯¸ ëŒ€ê¸° ì¤‘ì¸ ì—…ë°ì´íŠ¸ê°€ ìˆìœ¼ë©´ ì¦‰ì‹œ ì ìš©
            if (window.__SW_UPDATE_PENDING && window.__SW_REG.waiting) {
              autoApplyUpdate(window.__SW_REG);
              return;
            }
            // ì„œë²„ì— ìƒˆ SWê°€ ìˆëŠ”ì§€ ì²´í¬
            window.__SW_REG.update().then(function () {
              if (window.__SW_REG.waiting && navigator.serviceWorker.controller) {
                autoApplyUpdate(window.__SW_REG);
              }
            }).catch(function () { });
          }
        });
      });
    }

    // version.json í´ë§: ë°°í¬ ê°ì§€ (3ë¶„ë§ˆë‹¤)
    (function () {
      // ë¹Œë³´ë“œëŠ” page.tsxì˜ Supabase Realtime ë°°í¬ ê°ì§€ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì—¬ê¸°ì„œ í´ë§ ì¤‘ë³µ ìˆ˜í–‰ ì•ˆí•¨
      if (window.location.pathname.includes('/billboard/')) return;

      var currentBuild = '__BUILD_TIME__';
      if (!currentBuild || currentBuild.indexOf('TIME') > -1) return;
      setInterval(function () {
        fetch('/version.json?t=' + Date.now())
          .then(function (r) { return r.json(); })
          .then(function (data) {
            if (data.buildTime && data.buildTime !== currentBuild) {
              window.navigator.serviceWorker.getRegistration().then(function (reg) {
                if (reg) reg.update(); // updatefound â†’ installed â†’ autoApplyUpdate
              });
            }
          }).catch(function () { });
      }, 3 * 60 * 1000);
    })();
  </script>
</body>

</html>